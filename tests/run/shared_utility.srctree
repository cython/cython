"""
PYTHON setup.py build_ext --inplace
PYTHON -c "import run_tests"
"""

######## setup.py ########

from Cython.Build import cythonize
from Cython.Compiler import Options
from setuptools import setup, Extension

extensions = [
    Extension("*", ["**/*.pyx"]),
    Extension("pkg2.CythonShared", sources=["pkg2/CythonShared.c"]),
]

setup(
  ext_modules = cythonize(extensions, shared_utility_qualified_name = 'pkg2.CythonShared')
)

######## pkg2/__init__.py ########

######## pkg2/a.py ########
A = 5

######## pkg2/b.py ########
B = 6

######## pkg1/__init__.py ########

######## pkg1/Py3ClassCreate.pyx ########
# __Pyx_Py3ClassCreate

class Bar:
    pass


######## pkg1/PyObjectCallMethod.pyx ########
# PyObjectCallMethod0
# PyObjectCallMethod1

def func(a):
    a.append(5)

def func2(a):
    a.pop()

######## run_tests.py ########
import pkg1.Py3ClassCreate
import pkg1.PyObjectCallMethod

bar = pkg1.Py3ClassCreate.Bar()
lst = []
pkg1.PyObjectCallMethod.func(lst)
assert lst == [5]
pkg1.PyObjectCallMethod.func2(lst)
assert lst == []
